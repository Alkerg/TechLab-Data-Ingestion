<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plataforma TechLab - Panel de Control</title>
  
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="container">
    <h2>Panel del control Plataforma TechLab</h2>

    <h3>Crear nueva entidad</h3>
    <div class="form-group">
      <label>ID de la entidad:</label>
      <input type="text" id="newEntityId" placeholder="Ej: cuenta_personas:A35">
      
      <label>Tipo de entidad:</label>
      <input type="text" id="newEntityType" placeholder="Ej: cuenta_personas">

      <label>Atributos (JSON):</label>
      <textarea id="newEntityAttrs" rows="6" placeholder='{ "aforo": { "type": "Number", "value": 0 } }'>
      {
      "aforo": {
          "type": "Number",
          "value": 0
        }
      }
      </textarea>
      <button onclick="createEntity()">Crear Entidad</button>
      <p id="createStatus" class="status-msg"></p>
    </div>

    <h3>Entidades disponibles</h3>
    <div class="form-group">
      <button onclick="getEntities()">Consultar Entidades</button>
      <pre id="entities">Sin datos cargados...</pre>
    </div>

    <h3>Crear suscripci贸n</h3>
    <div class="form-group">
      <label>ID de la Entidad:</label>
      <input type="text" id="entityId" placeholder="Ej: cuenta_personas:A35">
      
      <label>Tipo de Entidad:</label>
      <input type="text" id="entityType" placeholder="Ej: cuenta_personas">
      
      <label>Atributos a monitorear (separados por coma):</label>
      <input type="text" id="attrs" placeholder="Ej: aforo,timestamp">
      
      <label>Endpoint de notificaci贸n:</label>
      <input type="text" id="endpoint" placeholder="Ej: http://mock-notify-receiver:9000/notify">
      
      <button onclick="subscribe()">Crear Suscripci贸n</button>
      <pre id="result">Esperando respuesta...</pre>
    </div>
    
    <h3>Suscripciones activas</h3>
    <div class="form-group">
      <button onclick="getSubscriptions()">Actualizar Lista</button>
      <div style="overflow-x: auto;">
        <table border="0">
          <thead>
            <tr>
              <th>Entidad</th>
              <th>Tipo</th>
              <th>Endpoint</th>
            </tr>
          </thead>
          <tbody id="subscriptions"></tbody>
        </table>
      </div>
    </div>

    <h3>Eliminaci贸n de entidades</h3>
    <div class="form-group" style="border-left: 4px solid #e74c3c;">
      <label>Eliminar Entidad por ID:</label>
      <input type="text" id="deleteEntityId" placeholder="Ej: cuenta_personas:A35">
      <button onclick="deleteEntity()" class="delete-btn">Eliminar Entidad</button>
      <p id="deleteStatus" class="status-msg" style="color: #e74c3c;"></p>
    </div>

  </div>

  <script src="script.js"></script>

</body>
</html>